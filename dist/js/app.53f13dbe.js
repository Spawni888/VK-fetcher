(function(t){function e(e){for(var n,r,o=e[0],l=e[1],c=e[2],f=0,u=[];f<o.length;f++)r=o[f],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&u.push(s[r][0]),s[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);d&&d(e);while(u.length)u.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,o=1;o<i.length;o++){var l=i[o];0!==s[l]&&(n=!1)}n&&(a.splice(e--,1),t=r(r.s=i[0]))}return t}var n={},s={app:0},a=[];function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=l;a.push(["911e","chunk-vendors"]),i()})({"00ed":function(t,e,i){},"075c":function(t,e,i){},"0dec":function(t,e,i){},"0e4c":function(t,e,i){},"10f4":function(t,e,i){},2457:function(t,e,i){t.exports=i.p+"img/404.dd239c19.jpg"},"379d":function(t,e,i){},"37fd":function(t,e,i){"use strict";var n=i("d80a"),s=i.n(n);s.a},"3e1e":function(t,e,i){t.exports=i.p+"img/repost.d36706bf.png"},"538f":function(t,e,i){"use strict";var n=i("0dec"),s=i.n(n);s.a},5847:function(t,e,i){"use strict";var n=i("10f4"),s=i.n(n);s.a},"689b":function(t,e,i){"use strict";var n=i("8437"),s=i.n(n);s.a},"6e66":function(t,e,i){"use strict";var n=i("00ed"),s=i.n(n);s.a},"7e44":function(t,e,i){"use strict";var n=i("075c"),s=i.n(n);s.a},8437:function(t,e,i){},"911e":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{attrs:{id:"stars"}}),i("div",{attrs:{id:"stars2"}}),i("div",{attrs:{id:"stars3"}}),i("transition",{attrs:{name:"slide-left-right",mode:"out-in"}},[i("div",{key:t.pageInfo.pageTitle,staticClass:"title-container"},[i("div",{staticClass:"core-title"},[i("span",[t._v(t._s(t.pageInfo.pageTitle))])])])]),i("transition",{attrs:{mode:"out-in",name:"slide-left-right"}},[i("router-view")],1),i("transition",{attrs:{mode:"out-in",name:"slide-right"}},[t.selectedValuesArray.length||"Home"!==t.$route.name?i("div",{key:t.pageInfo.buttonText,staticClass:"neon-button"},[i("neon-button",{attrs:{route:t.pageInfo.route}},[t._v(" "+t._s(t.pageInfo.buttonText)+" ")])],1):t._e()])],1)},a=[],r=(i("b0c0"),i("5530")),o=i("2f62"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("router-link",{attrs:{tag:"a",to:t.route?t.route:t.$route}},[i("span"),i("span"),i("span"),i("span"),t._t("default")],2)},c=[],d={name:"NeonButton",props:{route:{type:Object}}},f=d,u=(i("6e66"),i("2877")),p=Object(u["a"])(f,l,c,!1,null,"aa1d34f0",null),m=p.exports,_={components:{NeonButton:m},data:function(){return{pageTitle:"Let's fetch some"}},computed:Object(r["a"])({},Object(o["c"])(["selectedValuesArray"]),{pageInfo:function(){switch(this.$route.name){case"Home":return{pageTitle:"Let's fetch some",buttonText:"Friends List",route:{name:"FriendsList"}};case"FriendInfo":return{pageTitle:"Person Information",buttonText:"Back to Friends",route:{name:"FriendsList"}};default:return{pageTitle:"Friends List",buttonText:"Back Home",route:{name:"Home"}}}}})},h=_,v=(i("a568"),Object(u["a"])(h,s,a,!1,null,null,null)),g=v.exports,y=(i("99af"),i("4de4"),i("4160"),i("a630"),i("d3b7"),i("07ac"),i("6062"),i("3ca3"),i("159b"),i("ddb0"),i("96cf"),i("1da1")),b=i("2909"),C=i("bc3a"),w=i.n(C);n["a"].use(o["a"]);var x=new o["a"].Store({state:{selectedProfiles:{},friendsMap:{},_friends:[]},getters:{selectedProfilesObj:function(t){return Object(r["a"])({},t.selectedProfiles)},selectedValuesArray:function(t){return Object.values(t.selectedProfiles)},isSelected:function(t){return function(e){var i=e.id;return i in t.selectedProfiles}},profilesFriends:function(t){return Object(b["a"])(t._friends)},getMutualFriends:function(t){return function(e){return t.friendsMap[e]}}},mutations:{select:function(t,e){var i=Object(r["a"])({},t.selectedProfiles);i[e.id]=e,t.selectedProfiles=i},unselect:function(t,e){var i=e.id,n=Object(r["a"])({},t.selectedProfiles);delete n[i],t.selectedProfiles=n},createFriendsMap:function(t,e){var i=e.friends.items;i.forEach((function(i){t.friendsMap[i.id]?t.friendsMap[i.id].push(e):t.friendsMap[i.id]=[e]}))},clearFriendsMap:function(t,e){var i=e.friends.items,n=Object(r["a"])({},t.friendsMap);i.forEach((function(t){n[t.id]=n[t.id].filter((function(t){return t.id!==e.id}))})),t.friendsMap=n},createFriendsList:function(t){var e=[];Object.values(t.selectedProfiles).forEach((function(t){e=e.concat(t.friends.items)})),e=Array.from(new Set(e));var i={};e.forEach((function(t){i[t.id]?i[t.id]++:i[t.id]=1})),e=e.filter((function(t){return!--i[t.id]&&!t.deactivated})),t._friends=e.sort((function(t,e){return t.first_name.localeCompare(e.first_name)}))}},actions:{getFriendsCount:function(t,e){var i=t.state,n=e.start,s=e.end;return Object(y["a"])(regeneratorRuntime.mark((function t(){var e,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i._friends[e]&&!i._friends[e].friendsCount){t.next=2;break}return t.abrupt("return","continue");case 2:return t.next=4,w.a.get("/profiles/friends/".concat(i._friends[e].id)).then((function(t){var n=Object(b["a"])(i._friends);n[e].friendsCount=t.data.count,i._friends=n})).catch();case 4:case"end":return t.stop()}}),t)})),a=n;case 2:if(!(a<s)){t.next=10;break}return t.delegateYield(e(a),"t0",4);case 4:if(r=t.t0,"continue"!==r){t.next=7;break}return t.abrupt("continue",7);case 7:a++,t.next=2;break;case 10:case"end":return t.stop()}}),t)})))()}},modules:{}}),P=i("8c4f"),O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"friends-container"},[i("div",{staticClass:"friends-list"},[i("transition-group",{staticStyle:{display:"flex","justify-content":"space-between","flex-wrap":"wrap"},attrs:{name:"slide-right",tag:"div"}},t._l(t.paginatedFriends(),(function(e){return i("div",{key:e.id,staticClass:"friend",style:{border:"5px solid hsl(210, 23%, "+t.computeBrightness(e)+"%)"},on:{click:function(i){return t.openInfo(e)}}},[i("div",{staticClass:"friend__picture"},[i("img",{attrs:{src:e.photo_100,alt:"profile-img"}})]),i("div",{staticClass:"friend__fname"},[t._v(" First name: "+t._s(e.first_name)+" ")]),i("div",{staticClass:"friend__lname"},[t._v(" Last name: "+t._s(e.last_name)+" ")]),i("div",{staticClass:"friend__sex"},[t._v(" Sex: "+t._s(t.defineSex(e.sex))+" ")]),i("div",{staticClass:"friend__age"},[t._v(" Age: "+t._s(t.defineAge(e.bdate))+" ")]),i("div",{staticClass:"friend__friends"},[i("transition",{attrs:{mode:"out-in",name:"fade-in"}},[void 0!==e.friendsCount?i("span",[t._v(" Friends count: "+t._s(e.friendsCount)+" ")]):i("div",{staticClass:"lds-ring"},[i("div"),i("div"),i("div"),i("div")])])],1)])})),0)],1),i("transition",{attrs:{name:"slide-right"}},[t.isPageBottom?i("div",{key:t.pages,staticClass:"more-button",on:{click:t.increasePages}},[i("neon-button",[t._v("Show More")])],1):t._e()])],1)},k=[],j=(i("fb6a"),i("ac1f"),i("1276"),i("3835")),F={methods:{defineSex:function(t){switch(t){case 2:return"Male";case 1:return"Female";default:return"No info"}},defineAge:function(t){if(!t)return"No info";var e=t.split(".");if(3===e.length){var i=Object(j["a"])(e,3),n=i[0],s=i[1],a=i[2],r=new Date-new Date(a,s,n+1).getTime(),o=new Date(r);return Math.abs(o.getUTCFullYear()-1970)}return"No info"}}},S={name:"FriendsList",components:{NeonButton:m},mixins:[F],data:function(){return{pages:1,isPageBottom:!1}},computed:Object(r["a"])({},Object(o["c"])(["profilesFriends","getMutualFriends","selectedValuesArray"])),mounted:function(){this.pages=1,window.addEventListener("scroll",this.onScroll)},destroyed:function(){window.removeEventListener("scroll",this.onScroll)},methods:Object(r["a"])({},Object(o["b"])(["getFriendsCount"]),{paginatedFriends:function(){var t=21*this.pages;return t>this.profilesFriends.length-1?(window.removeEventListener("scroll",this.onScroll),this.isPageBottom=!1,this.profilesFriends):this.profilesFriends.slice(0,t)},increasePages:function(){this.isPageBottom=!1;var t=21*this.pages,e=t+21;e>this.profilesFriends.length&&(e=this.profilesFriends.length),this.getFriendsCount({start:t,end:e}),this.pages++},onScroll:function(){var t=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)+window.innerHeight+800>=document.documentElement.offsetHeight;this.isPageBottom=t},computeBrightness:function(t){var e=t.id,i=this.getMutualFriends(e).length,n=15*i+20;return n>100?100:n},openInfo:function(t){var e=t.id;this.$router.push({name:"FriendInfo",params:{id:e}})}})},M=S,T=(i("7e44"),Object(u["a"])(M,O,k,!1,null,"eefe4adc",null)),E=T.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("div",{staticClass:"home-input"},[n("div",{staticClass:"input-container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.id,expression:"id"}],attrs:{type:"text",placeholder:"PLACE VK-ID HERE"},domProps:{value:t.id},on:{input:[function(e){e.target.composing||(t.id=e.target.value)},t.getProfileInfo]}})]),n("div",{staticClass:"lazy-profile"},[n("transition",{attrs:{mode:"out-in",name:"fade-in"}},["not-found"===t.lazyProfile?n("div",{key:t.notFoundId,staticClass:"profile-inner"},[n("div",{staticClass:"profile-picture"},[n("img",{attrs:{src:i("2457"),alt:"profile-img"}})]),n("div",{staticClass:"profile-inner__text"},[t._v(" Profile with id: "),n("br"),n("span",[t._v(t._s(t.notFoundId))]),n("br"),t._v(" Not found. "),n("br"),t._v(" Try a different one. ")])]):t.lazyProfile?n("div",{key:t.lazyProfile.id,staticClass:"profile-inner profile-inner_hover",on:{click:t.selectProfile}},[n("div",{staticClass:"profile-picture"},[n("img",{attrs:{src:t.lazyProfile.photo_100,alt:"profile-img"}})]),n("div",{staticClass:"lazy-profile__fname"},[t._v(" First name: "+t._s(t.lazyProfile.first_name)+" ")]),n("div",{staticClass:"lazy-profile__lname"},[t._v(" Last name: "+t._s(t.lazyProfile.last_name)+" ")]),n("div",{staticClass:"lazy-profile__sex"},[t._v(" Sex: "+t._s(t.defineSex(t.lazyProfile.sex))+" ")]),n("div",{staticClass:"lazy-profile__age"},[t._v(" Age: "+t._s(t.defineAge(t.lazyProfile.bdate))+" ")]),n("div",{staticClass:"lazy-profile__friends"},[t._v(" Friends count: "+t._s(t.lazyProfile.friends.count)+" ")])]):n("div",{key:"loader",staticClass:"lazy-profile__loader"},[n("div",{staticClass:"inner one"}),n("div",{staticClass:"inner two"}),n("div",{staticClass:"inner three"})])])],1)]),n("transition",{attrs:{name:"fade-in",mode:"out-in"}},[t.selectedValuesArray.length?n("div",{key:t.selectedValuesArray.length,staticClass:"selected-profiles"},t._l(t.selectedValuesArray,(function(e){return n("div",{key:e.id,staticClass:"selected-profiles__item",on:{click:function(i){return t.unselectProfile(e)}}},[n("div",{staticClass:"selected-profiles__picture"},[n("img",{attrs:{src:e.photo_100,alt:"selected-img"}})]),n("div",{staticClass:"profile-hover"},[n("div",{staticClass:"profile-hover__picture"},[n("img",{attrs:{src:i("f05f"),alt:"cross"}})]),n("div",{staticClass:"profile-hover__name"},[t._v(" "+t._s(e.first_name)+" "+t._s(e.last_name)+" ")])])])})),0):t._e()]),n("transition",{attrs:{name:"fade-in"}},[t.showErrorModal?n("div",{staticClass:"modal-error"},[n("div",{staticClass:"modal-error__title"},[t._v(" Please start app server ")]),n("div",{staticClass:"modal-error__text"},[t._v(" Type "),n("span",[t._v("yarn start")]),t._v(" in a new terminal window. ")])]):t._e()])],1)},A=[],z=i("b047"),L=i.n(z),$={name:"Home",mixins:[F],data:function(){return{id:"",lazyProfile:null,notFoundId:null,showErrorModal:!1}},computed:Object(r["a"])({},Object(o["c"])(["isSelected","selectedValuesArray"])),methods:Object(r["a"])({},Object(o["d"])(["select","unselect","createFriendsMap","clearFriendsMap"]),{getProfileInfo:L()((function(){var t=this;if(!this.id||this.isSelected({id:this.id}))return this.lazyProfile=null;w.a.get("/profiles/profile-and-friends/".concat(this.id)).then((function(e){t.lazyProfile=e.data})).catch((function(e){if(500===e.response.status)return t.showErrorModal=!0;t.lazyProfile="not-found",t.notFoundId=t.id}))}),500),selectProfile:function(){if(this.isSelected(this.lazyProfile))return this.notFoundId=this.id,this.lazyProfile="already-selected";this.select(this.lazyProfile),this.createFriendsMap(this.lazyProfile),this.lazyProfile=null},unselectProfile:function(t){this.unselect(t),this.clearFriendsMap(t),parseInt(this.id)!==t.id&&String(this.id)!==String(t.domain)||this.getProfileInfo()}})},B=$,H=(i("689b"),Object(u["a"])(B,I,A,!1,null,"aee40bc6",null)),N=H.exports,R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"friend-info-container"},[i("transition",{attrs:{name:"fade-in",mode:"out-in"}},[t.profile?i("div",{key:t.profile.id,staticClass:"friend-info"},[i("div",{staticClass:"friend-picture-container"},[i("div",{staticClass:"friend-picture"},[i("img",{attrs:{src:t.profile.photo_400_orig||t.profile.photo_200_orig||t.profile.photo_200,alt:"photo"}})])]),i("div",{staticClass:"friend-about"},[i("div",{staticClass:"friend-about__fname"},[i("span",[t._v("First name:")]),i("div",[t._v(t._s(t.profile.first_name))])]),i("div",{staticClass:"friend-about__lname"},[i("span",[t._v("Last name:")]),i("div",[t._v(t._s(t.profile.last_name))])]),i("div",{staticClass:"friend-about__sex"},[i("span",[t._v("Sex:")]),i("div",[t._v(t._s(t.defineSex(t.profile.sex)))])]),i("div",{staticClass:"friend-about__age"},[i("span",[t._v("Age:")]),i("div",[t._v(t._s(t.defineAge(t.profile.bdate)))])])])]):i("div",{key:"loader",staticClass:"loader-container"},[i("div",{staticClass:"loader"},[i("div",{staticClass:"inner one"}),i("div",{staticClass:"inner two"}),i("div",{staticClass:"inner three"})])])]),i("div",{staticClass:"friends-with"},[t._m(0),i("div",{staticClass:"friends-list"},t._l(t.selectedFriends,(function(e){return i("div",{key:e.id,staticClass:"friend"},[i("div",{staticClass:"friend__picture"},[i("img",{attrs:{src:e.photo_100,alt:"profile-img"}})]),i("div",{staticClass:"friend__fname"},[t._v(" First name: "+t._s(e.first_name)+" ")]),i("div",{staticClass:"friend__lname"},[t._v(" Last name: "+t._s(e.last_name)+" ")]),i("div",{staticClass:"friend__sex"},[t._v(" Sex: "+t._s(t.defineSex(e.sex))+" ")]),i("div",{staticClass:"friend__age"},[t._v(" Age: "+t._s(t.defineAge(e.bdate))+" ")])])})),0)]),i("div",{staticClass:"wall-container"},[i("div",{staticClass:"title-container"},[i("div",{staticClass:"core-title"},[i("span",[t._v(" "+t._s(null!==t.wall&&t.wall.items.length?"Wall":"Wall is hidden or empty")+" ")])])]),t.wall&&t.profile?i("profile-wall",{attrs:{wall:t.wall,profile:t.profile}}):t._e()],1),i("transition",{attrs:{name:"slide-right"}},[t.isPageBottom?i("div",{key:t.wallPosts,staticClass:"more-button",on:{click:t.showMorePosts}},[i("neon-button",[t._v("Show More")])],1):t._e()])],1)},V=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title-container"},[i("div",{staticClass:"core-title"},[i("span",[t._v("Are friends with selected")])])])}],D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.wall.items?i("div",{staticClass:"wall"},[i("transition-group",{attrs:{name:"fade-in",mode:"out-in"}},t._l(t.wall.items,(function(e){return i("wall-post",{key:e.id,staticClass:"wall__post",attrs:{post:e,profile:t.profile}})})),1)],1):t._e()},W=[],Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wall-post"},[n("div",{staticClass:"profile-info"},[n("div",{staticClass:"profile-info__picture"},[n("a",{attrs:{href:"https://vk.com/id"+t.profileCopy.id,target:"_blank"}},[n("img",{attrs:{src:t.profileCopy.photo_400_orig||t.profileCopy.photo_200_orig||t.profileCopy.photo_200,alt:"profile"}})])]),n("div",{staticClass:"profile-info__other"},[n("div",{staticClass:"profile-info__name"},[t._v(" "+t._s(t.profileCopy.first_name)+" "+t._s(t.profileCopy.last_name)+" ")]),n("div",{staticClass:"profile-info__date"},[n("a",{attrs:{href:"https://vk.com/wall"+t.profile.id+"_"+t.postCopy.id,target:"_blank"}},[t._v(" "+t._s(t.defineDate(t.postCopy.date))+" ")])])]),n("attachments",{attrs:{profile:t.profile,"post-copy":t.postCopy,"profile-copy":t.profileCopy,input:t.postCopy}})],1),t.postCopy.copy_history?n("div",{staticClass:"reposts"},[n("transition-group",{attrs:{mode:"out-in",name:"fade-in"}},t._l(t.postCopy.copy_history,(function(e,s){return e.photo?n("div",{key:e.photo,staticClass:"repost",style:{paddingLeft:50*s+50+"px"}},[n("div",{staticClass:"repost-info"},[n("div",{staticClass:"repost-icon"},[n("img",{attrs:{src:i("3e1e"),alt:"repost"}})]),n("div",{staticClass:"repost-info__picture"},[n("a",{attrs:{href:t.createImgLink(e),target:"_blank"}},[n("img",{attrs:{src:e.photo,alt:"img"}})])]),n("div",{staticClass:"repost-info__other"},[n("div",{staticClass:"repost-info__name"},[t._v(" "+t._s(e.name)+" ")]),n("div",{staticClass:"repost-info__date"},[n("a",{attrs:{href:"https://vk.com/wall"+e.from_id+"_"+e.id,target:"_blank"}},[t._v(" "+t._s(t.defineDate(e.date))+" ")])])]),n("attachments",{attrs:{profile:t.profile,"post-copy":t.postCopy,"profile-copy":t.profileCopy,input:e}})],1)]):t._e()})),0)],1):t._e()])},J=[],K=(i("a4d3"),i("e01a"),i("d28b"),i("25f0"),i("5319"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"attachments"},[t.input.attachments&&t.attachsAreTypeOf(t.input.attachments,"doc")?i("div",{staticClass:"attachments-photo"},t._l(t.input.attachments,(function(e){return"doc"===e.type?i("div",{staticClass:"attachments__item"},[i("a",{attrs:{href:"https://vk.com/wall"+t.profile.id+"_"+t.postCopy.id,target:"_blank"}},[i("div",{staticClass:"img-container"},[i("img",{attrs:{src:e.doc.url,alt:"photo"}})])])]):t._e()})),0):t._e(),t.input.attachments&&t.attachsAreTypeOf(t.input.attachments,"photo")?i("div",{staticClass:"attachments-photo"},t._l(t.input.attachments,(function(e){return"photo"===e.type?i("div",{staticClass:"attachments__item"},[i("a",{attrs:{href:"https://vk.com/photo"+e.photo.owner_id+"_"+e.photo.id,target:"_blank"}},[i("div",{staticClass:"img-container"},[i("img",{attrs:{src:e.photo.photo_604||e.photo.photo_130,alt:"photo"}})])])]):t._e()})),0):t._e(),t.input.attachments&&t.attachsAreTypeOf(t.input.attachments,"video")?i("div",{staticClass:"attachments-video"},t._l(t.input.attachments,(function(e){return"video"===e.type?i("div",{staticClass:"attachments__item"},[i("div",{staticClass:"preview"},[i("a",{attrs:{href:"https://vk.com/video"+e.video.owner_id+"_"+e.video.id,target:"_blank"}},[i("div",{staticClass:"img-case"},[i("img",{attrs:{src:e.video.photo_320||e.video.photo_130,alt:"photo"}})]),t._m(0,!0)])]),i("div",{staticClass:"name"},[t._v(" "+t._s(e.video.title)+" ")])]):t._e()})),0):t._e(),t.input.attachments&&t.attachsAreTypeOf(t.input.attachments,"audio")?i("div",{staticClass:"attachments-audio"},t._l(t.input.attachments,(function(e){return"audio"===e.type?i("div",{staticClass:"attachments__item"},[i("div",{staticClass:"audio-link"},[i("a",{attrs:{href:"https://vk.com/wall"+t.profile.id+"_"+t.postCopy.id,target:"_blank"}},[t._m(1,!0)]),i("div",{staticClass:"name"},[t._v(" "+t._s(e.audio.artist)+" - "+t._s(e.audio.title)+" ")])])]):t._e()})),0):t._e(),t.input.text?i("div",{staticClass:"attachments__text",domProps:{innerHTML:t._s(t.parseText(t.input.text))}}):t._e()])}),G=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"video-overlay"},[n("img",{attrs:{src:i("d902"),alt:"play"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"img-container"},[n("img",{attrs:{src:i("d902"),alt:"audio"}})])}],U=(i("466d"),{name:"Attachments",props:{input:{type:Object},profileCopy:{type:Object},postCopy:{type:Object},profile:{type:Object}},methods:{parseText:function(t){if(t){var e=t,i=t.match(/(\[(.*?)\|(.*?)])/);if(null===i||i.length<3)return t;if(i.shift(),3===i.length){var n=i.shift();e=e.replace(n,(function(){var t=i.shift(),e=i.shift();return'<a href="https://vk.com/'.concat(t,'" target="_blank">').concat(e,"</a>")}))}return this.parseText.call(this,e)}},attachsAreTypeOf:function(t,e){var i=!0,n=!1,s=void 0;try{for(var a,r=t[Symbol.iterator]();!(i=(a=r.next()).done);i=!0){var o=a.value;if(o.type===e)return!0}}catch(l){n=!0,s=l}finally{try{i||null==r.return||r.return()}finally{if(n)throw s}}return!1}}}),q=U,Q=(i("538f"),Object(u["a"])(q,K,G,!1,null,null,null)),X=Q.exports,Z={name:"WallPost",components:{Attachments:X},props:{post:{type:Object},profile:{type:Object}},data:function(){return{postCopy:null,profileCopy:null,attachmentKey:1}},created:function(){this.postCopy=Object(r["a"])({},this.post),this.profileCopy=Object(r["a"])({},this.profile),this.getPostHistoryInfo()},methods:{getPostHistoryInfo:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){var i,n,s,a,o,l,c,d,f,u,p,m,_,h,v,g,y,b,C;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(w.a.get("/profiles/profile-full/".concat(t.postCopy.from_id)).then((function(e){t.profileCopy=e.data})),t.postCopy.copy_history){e.next=3;break}return e.abrupt("return");case 3:i=!0,n=!1,s=void 0,e.prev=6,a=t.postCopy.copy_history[Symbol.iterator]();case 8:if(i=(o=a.next()).done){e.next=30;break}if(l=o.value,!/^-/g.test(l.from_id)){e.next=20;break}return e.next=13,w.a.get("/profiles/group/".concat(String(l.from_id).slice(1)));case 13:c=e.sent,d=c.data,f=d.name,u=d.photo_50,p=d.photo_100,m=d.photo_200,l.name=f,l.photo=m||p||u,t.postCopy=Object(r["a"])({},t.postCopy),e.next=27;break;case 20:return e.next=22,w.a.get("/profiles/profile-full/".concat(l.owner_id));case 22:_=e.sent,h=_.data,v=h.first_name,g=h.last_name,y=h.photo_200,b=h.photo_200_orig,C=h.photo_400_orig,l.name="".concat(v," ").concat(g),l.photo=C||b||y,t.postCopy=Object(r["a"])({},t.postCopy);case 27:i=!0,e.next=8;break;case 30:e.next=36;break;case 32:e.prev=32,e.t0=e["catch"](6),n=!0,s=e.t0;case 36:e.prev=36,e.prev=37,i||null==a.return||a.return();case 39:if(e.prev=39,!n){e.next=42;break}throw s;case 42:return e.finish(39);case 43:return e.finish(36);case 44:case"end":return e.stop()}}),e,null,[[6,32,36,44],[37,,39,43]])})))()},defineDate:function(t){var e=new Date(1970,0,1,3,0,0,0);return e.setSeconds(e.getSeconds()+t),e=e.toString().replace(/GMT.*$/gi,""),e},createImgLink:function(t){var e=t.from_id,i=/^-/.test(e)?"public":"id",n="public"===i?String(e).slice(1):e;return"https://vk.com/".concat(i).concat(n)}}},tt=Z,et=(i("5847"),Object(u["a"])(tt,Y,J,!1,null,null,null)),it=et.exports,nt={name:"ProfileWall",components:{WallPost:it},props:{wall:{type:Object},profile:{type:Object}}},st=nt,at=(i("b43c"),Object(u["a"])(st,D,W,!1,null,"db8d6aa8",null)),rt=at.exports,ot={name:"FriendInfo",components:{ProfileWall:rt,NeonButton:m},mixins:[F],data:function(){return{profile:null,wall:null,wallPosts:1,selectedFriends:[],isPageBottom:!1}},computed:Object(r["a"])({},Object(o["c"])(["selectedProfilesObj","getMutualFriends"])),created:function(){this.getPageInfo(),this.wallPosts=1},destroyed:function(){window.removeEventListener("scroll",this.onScroll)},methods:{getPageInfo:function(){var t=this;this.selectedFriends=[],w.a.get("/profiles/profile-full/".concat(this.$route.params.id)).then((function(e){t.profile=e.data})),w.a.get("/profiles/profile-wall/".concat(this.$route.params.id,"/0")).then((function(e){t.wall=e.data,window.addEventListener("scroll",t.onScroll.bind(t))})).catch((function(){t.wall=null}));var e=this.getMutualFriends(this.$route.params.id);void 0!==e&&e.length&&e.forEach((function(e){t.selectedFriends.push(t.selectedProfilesObj[e.id])}))},onScroll:function(){if(this.wall.count===this.wallPosts||!this.wall.items.length)return this.isPageBottom=!1;var t=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)+window.innerHeight+200>=document.documentElement.offsetHeight;this.isPageBottom=t},showMorePosts:function(t){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.target.blur(),e.isPageBottom=!1,i.next=4,w.a.get("/profiles/profile-wall/".concat(e.$route.params.id,"/").concat(e.wallPosts)).then((function(t){var i,n=Object(r["a"])({},e.wall);(i=n.items).push.apply(i,Object(b["a"])(t.data.items)),e.wall=n})).catch((function(){e.showMorePosts.call(e)}));case 4:e.wallPosts++;case 5:case"end":return i.stop()}}),i)})))()}}},lt=ot,ct=(i("37fd"),Object(u["a"])(lt,R,V,!1,null,"1db52d2a",null)),dt=ct.exports;n["a"].use(P["a"]);var ft=[{path:"/",component:N,name:"Home"},{path:"/friend/:id",component:dt,name:"FriendInfo"},{path:"/friends-list",component:E,name:"FriendsList",beforeEnter:function(t,e,i){x.commit("createFriendsList"),x.dispatch("getFriendsCount",{start:0,end:21}),i()}},{path:"*",redirect:"/"}],ut=new P["a"]({mode:"history",base:"/",scrollBehavior:function(){return window.scrollTo({top:0,behavior:"smooth"})},routes:ft});ut.beforeEach((function(t,e,i){var n=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop);if(0===n)return i();setTimeout((function(){return i()}),250*n/2058+400),window.scrollTo({top:0,behavior:"smooth"}),i(!1)}));var pt=ut;n["a"].config.productionTip=!1,new n["a"]({router:pt,store:x,render:function(t){return t(g)}}).$mount("#app")},a568:function(t,e,i){"use strict";var n=i("379d"),s=i.n(n);s.a},b43c:function(t,e,i){"use strict";var n=i("0e4c"),s=i.n(n);s.a},d80a:function(t,e,i){},d902:function(t,e,i){t.exports=i.p+"img/play.f4f0ca22.png"},f05f:function(t,e,i){t.exports=i.p+"img/cross.be7286cb.png"}});
//# sourceMappingURL=app.53f13dbe.js.map